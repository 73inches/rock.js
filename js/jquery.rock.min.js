(function(a){a.fn.rocks=function(g){var b={optionClass:"option",optClass:"opt",onChange:function(){}},h={buildLi:function(c){return a("<li />",{"class":b.optionClass,text:a(c).text()})}};return this.each(function(){g&&a.extend(b,g);var c=a(this).hide(),d=a("<ul />",{"class":"rockdown"});a("<li />").append(a("<span />",{"class":"handle",text:c.find(":selected").text()})).appendTo(d);var f=a("<ul />",{"class":b.optionClass});c.children("option:not(:selected),optgroup").each(function(){if(a(this).is("optgroup")){f.append(a("<li />",
{"class":b.optClass}).append(a("<span />",{text:a(this).attr("label")})));var e=a("<ul />");a(this).children().each(function(){h.buildLi(this).data("val",a(this).val()).appendTo(e)});f.find("li."+b.optClass+":last").append(e)}else h.buildLi(this).data("val",a(this).val()).appendTo(f);d.append(f)});d.delegate("li.option","click.rock",function(e){c.val(a(e.target).data("val"));d.find("span.handle").text(a(e.target).text());b.onChange.call(c)}).bind("click.rock",function(){a(this).toggleClass("open")});
a("body").append(d)})}})(jQuery);